/*
------------------------------------------------------------
ğŸ“˜ Problem: 1517. Find Users With Valid E-Mails
Difficulty: Easy
Platform: LeetCode SQL
------------------------------------------------------------

ğŸ§± Table: Users
+---------------+---------+
| Column Name   | Type    |
+---------------+---------+
| user_id       | int     |
| name          | varchar |
| mail          | varchar |
+---------------+---------+
user_id is the primary key.

This table contains information about users signed up on a website.
Some e-mails are invalid.

------------------------------------------------------------
ğŸ¯ Goal:
Find all users who have a **valid email address**.

A valid email must follow these rules:
1ï¸âƒ£ The prefix (before '@') must:
   - Start with a letter (Aâ€“Z or aâ€“z)
   - Contain only letters, digits, underscore '_', period '.', or dash '-'

2ï¸âƒ£ The domain must be exactly: `@leetcode.com`

------------------------------------------------------------
ğŸ“Š Example Input:

Users table:
+---------+-----------+-------------------------+
| user_id | name      | mail                    |
+---------+-----------+-------------------------+
| 1       | Winston   | winston@leetcode.com    |
| 2       | Jonathan  | jonathanisgreat         |
| 3       | Annabelle | bella-@leetcode.com     |
| 4       | Sally     | sally.come@leetcode.com |
| 5       | Marwan    | quarz#2020@leetcode.com |
| 6       | David     | david69@gmail.com       |
| 7       | Shapiro   | .shapo@leetcode.com     |
+---------+-----------+-------------------------+

------------------------------------------------------------
ğŸ“¤ Expected Output:

+---------+-----------+-------------------------+
| user_id | name      | mail                    |
+---------+-----------+-------------------------+
| 1       | Winston   | winston@leetcode.com    |
| 3       | Annabelle | bella-@leetcode.com     |
| 4       | Sally     | sally.come@leetcode.com |
+---------+-----------+-------------------------+

------------------------------------------------------------
ğŸ§  Explanation:

âœ… Valid emails:
- `winston@leetcode.com` â†’ starts with letter, correct domain
- `bella-@leetcode.com` â†’ valid characters and domain
- `sally.come@leetcode.com` â†’ valid

âŒ Invalid emails:
- `jonathanisgreat` â†’ missing domain
- `quarz#2020@leetcode.com` â†’ contains `#` (invalid character)
- `david69@gmail.com` â†’ wrong domain
- `.shapo@leetcode.com` â†’ starts with a period (invalid)

------------------------------------------------------------
ğŸ§© SQL Logic (Step-by-Step):

1ï¸âƒ£ Check the prefix using a Regular Expression (REGEXP)
   - Must start with a letter â†’ `^[A-Za-z]`
   - Followed by letters, digits, underscore, period, or dash â†’ `[A-Za-z0-9_.-]*`
   - End with domain `@leetcode.com` â†’ `@leetcode\.com$`

âœ… Combined Pattern:
   `'^[A-Za-z][A-Za-z0-9_.-]*@leetcode\\.com$'`

2ï¸âƒ£ Use MySQLâ€™s `REGEXP` operator to filter valid emails.

------------------------------------------------------------
âœ… Final SQL Solution:
*/

SELECT 
    user_id,
    name,
    mail
FROM Users
WHERE mail REGEXP '^[A-Za-z][A-Za-z0-9_.-]*@leetcode\\.com$';

/*
------------------------------------------------------------
ğŸ§¾ Output Explanation:
Each row represents a user with a valid email address according
to the given rules. We check the pattern using REGEXP.

Example Output:
| user_id | name      | mail                    |
|----------|-----------|-------------------------|
| 1        | Winston   | winston@leetcode.com    |
| 3        | Annabelle | bella-@leetcode.com     |
| 4        | Sally     | sally.come@leetcode.com |

------------------------------------------------------------
ğŸ’¡ MySQL REGEXP Details:
- `^` : Start of string
- `[A-Za-z]` : Must start with a letter
- `[A-Za-z0-9_.-]*` : Allowed characters after first letter
- `@leetcode\.com$` : Must end with "@leetcode.com"

------------------------------------------------------------
ğŸ“‚ File Info:
Filename: 1517_Find_Users_With_Valid_Emails.sql
Author: Rushikesh Bhagwat
GitHub Repo: Top50 SQL (LeetCode Solutions with Explanations)
------------------------------------------------------------
*/
